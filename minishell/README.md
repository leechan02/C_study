<h1 align="center">
    🐚 minishell
</h1>

<h3 align="center">
	<a href="#-about-the-project">프로젝트 소개</a>
	<span> · </span>
	<a href="#%EF%B8%8F-usage">사용법</a>
</h3>

### 🌟 **프로젝트 개요**

MiniShell 프로젝트는 여러분이 직접 **간단한 쉘**을 만드는 것입니다. Bash와 비슷한 동작을 구현하며, **프로세스**와 **파일 디스크립터**에 대해 깊이 있게 배우게 됩니다. 이 프로젝트는 여러분의 **팀워크**와 **문제 해결 능력**을 시험할 것입니다.

### 💡 **프로젝트 목표**

- **프로세스 관리** 및 **파일 디스크립터** 관리
- **멀티 프로세싱**, **파이프**, **리다이렉션**, **환경 변수** 등 시스템 콜 사용
- **깊은 문자열 파싱** 구현 → [LALR 파서](https://en.wikipedia.org/wiki/LALR_parser)
- **Git과 Shell**에 대한 심층 학습
- **컴파일러 또는 인터프리터**의 작동 방식을 이해하기


## 🚀 **프로그램 실행 방법**

1. **레포지토리 클론**: 프로젝트 디렉토리를 로컬 환경에 클론합니다.
   
   ```bash
   git clone https://github.com/사용자명/프로젝트명.git
   cd 프로젝트명
   ```

2. **Makefile**을 이용하여 프로그램을 컴파일합니다.

   ```bash
   make
   ```

3. **MiniShell** 실행

   ```bash
   ./minishell
   ```

4. 쉘을 종료하려면 `exit` 명령어를 입력합니다.


## 🔑 **주요 개념**

### 1. **프로세스 (Process)** 🏃‍♂️
   - 프로그램이 메모리 상에서 실행 중인 상태입니다.
   - **포크(fork)**를 사용하여 새로운 프로세스를 생성하고, **exec** 함수를 이용해 다른 프로그램을 실행할 수 있습니다.
   - MiniShell은 사용자가 입력한 명령을 별도의 자식 프로세스에서 실행합니다.

### 2. **파일 디스크립터 (File Descriptor)** 🗂️
   - 운영 체제는 파일을 다룰 때, 파일에 접근할 수 있는 일종의 핸들인 **파일 디스크립터**를 사용합니다.
   - 표준 입력, 표준 출력, 표준 오류는 각각 0, 1, 2로 고정된 파일 디스크립터 번호를 가집니다.

### 3. **리다이렉션 (Redirection)** 🔄
   - **리다이렉션**은 명령어의 입력 또는 출력을 다른 파일이나 프로세스로 전환하는 기능입니다.
     - `<`: 입력 리다이렉션 (파일에서 명령어로)
     - `>`: 출력 리다이렉션 (명령어에서 파일로)
     - `>>`: 출력 덧붙이기 모드
     - `<<`: here-doc을 통해 사용자가 정의한 문자열로 입력을 받아 처리

### 4. **파이프 (Pipe)** 🚰
   - **파이프**는 한 명령어의 출력을 다른 명령어의 입력으로 연결하는 방식입니다.
   - `|`를 사용하여 두 명령어를 연결할 수 있습니다.
   
   예시: 
   
   ```bash
   ls | grep ".c"
   ```

   이 명령은 `ls` 명령의 출력을 `grep` 명령의 입력으로 전달하여 `.c`로 끝나는 파일만 출력합니다.

### 5. **환경 변수 (Environment Variable)** 🌍
   - **환경 변수**는 운영 체제나 응용 프로그램에서 사용되는 전역 설정입니다.
   - `$PATH`와 같은 환경 변수는 쉘에서 명령어를 실행할 때 경로를 찾는 데 사용됩니다.
   - MiniShell은 `export` 명령어로 환경 변수를 설정하고, `$`를 사용하여 변수를 참조할 수 있습니다.

### 6. **시그널 (Signal)** 📶
   - **시그널**은 프로세스 간의 비동기적 통신 방법으로, 특정 이벤트가 발생했음을 알리는 역할을 합니다.
   - MiniShell에서는 사용자가 `Ctrl+C`, `Ctrl+D` 등의 키를 눌렀을 때 적절히 처리해야 합니다.
   - 예시:
     - `Ctrl+C`: 현재 실행 중인 명령을 종료하고 새로운 프롬프트를 표시합니다.
     - `Ctrl+D`: EOF(End of File)를 보내며 쉘을 종료합니다.


### 🛠️ **내장 명령어들 (Built-ins)**

- `echo` (옵션: -n)
- `cd` (상대 또는 절대 경로)
- `pwd` (옵션 없음)
- `export` (옵션 없음)
- `unset` (옵션 없음)
- `env` (옵션 및 인수 없음)
- `exit` (옵션 없음)


### 🔄 **리다이렉션 (Redirections)**

- `<` : 입력 리다이렉션
- `>` : 출력 리다이렉션
- `<<` : **here_doc** (현재 소스로부터 입력 읽기)
- `>>` : 출력 덧붙이기 모드


### 🔗 **파이프 (Pipe)**

명령어의 출력이 다음 명령어의 입력으로 연결됩니다.


### 🧩 **환경 변수와 `$?`**

- `$?`는 가장 최근에 실행된 **포그라운드 파이프라인**의 **종료 상태**로 확장됩니다.


### 🛑 **시그널 처리 (Signals)**

- `Ctrl-C`: 새 프롬프트를 표시합니다.
- `Ctrl-D`: 쉘을 종료합니다.
- `Ctrl-\`: 아무 동작도 하지 않습니다.


## 📝 **파싱 순서 (Parsing)**

1. **따옴표 처리**: `‘` 및 `"`를 검사하며 파이프 단위로 문자열을 나눕니다.
2. **토큰 나누기**: 공백 및 `<`, `>`, `<<`, `>>`를 기준으로 토큰을 나눕니다.
3. **리다이렉션 검사**: 나눈 토큰에서 리다이렉션이 있는지 확인합니다.
4. **환경 변수 치환**: `$`로 시작하는 문자열을 환경 변수로 치환합니다.
5. **따옴표 제거**: 치환된 토큰에서 따옴표를 제거합니다.


## 💻 **명령어 실행 (Execution)**

1. `<<`를 처리하며 입력을 읽고 리다이렉션합니다.
2. 명령어가 종료되면 임시 파일을 삭제합니다.


## 🛡️ **시그널 (Signal) 처리**

시그널은 프로세스 간의 통신 방법입니다. MiniShell에서는 **Ctrl+C**, **Ctrl+D** 등의 시그널을 적절히 처리해야 합니다.


## 🧩 **내장 명령어 구현 (Builtins)**

쉘의 내장 명령어를 처리하는 함수를 구현합니다. MiniShell은 다음 내장 명령어들을 지원해야 합니다:

- **echo**: 문자열 출력
- **cd**: 디렉토리 변경
- **pwd**: 현재 디렉토리 경로 출력
- **export**: 환경 변수 설정
- **unset**: 환경 변수 삭제
- **env**: 환경 변수 출력
- **exit**: 쉘 종료


**🔗 참고 자료**  
- [LALR 파서](https://en.wikipedia.org/wiki/LALR_parser)  
- [파싱 트리](https://epicarts.tistory.com/163)  
- [GNU readline 라이브러리](https://tiswww.case.edu/php/chet/readline/readline.html#SEC34)  
