<h1 align="center">
    🎮 cub3d
</h1>

<h3 align="center">
	<a href="#-about-the-project">프로젝트 소개</a>
	<span> · </span>
	<a href="#%EF%B8%8F-usage">사용법</a>
</h3>

## 📘 프로젝트 소개

`Cub3D` 프로젝트는 **Ray-casting** 기술을 활용하여 2D 맵을 3D 시뮬레이션하는 그래픽 엔진을 구현하는 프로젝트입니다. 이 프로젝트를 통해 **삼각함수**, **맵 파싱**, **렌더링 파이프라인** 등 3D 그래픽스의 기본 개념을 익히고, **MinilibX** 라이브러리를 사용하여 간단한 그래픽 엔진을 제작합니다.


## 💡 주요 목표

- **Ray-casting 구현**: 2D 맵을 기반으로 3D 그래픽을 그리기 위한 레이캐스팅 알고리즘을 구현합니다.
- **맵 파싱**: `.cub` 확장자의 맵 파일을 파싱하여 벽 텍스처, 바닥 및 천장 색상을 설정하고, 맵 내의 플레이어 위치를 설정합니다.
- **MinilibX 활용**: 간단한 창 관리 및 그래픽 출력을 위한 라이브러리인 MinilibX를 사용하여 그래픽을 처리합니다.
- **동적 카메라 구현**: 사용자의 입력에 따라 시점이 변하고, 이를 3D 그래픽으로 실시간 렌더링합니다.


## 📂 주요 개념

### 1. **Ray-casting**
Ray-casting은 2D 맵에서 시작하여, 시야 각도 내에서 각도를 기반으로 레이(빛)을 쏘아 벽과의 거리를 계산하는 방식입니다. 이를 통해 벽을 그릴 때 거리에 따라 스케일링하고, 사용자가 3D 공간을 탐험하는 것처럼 보이도록 합니다.

### 2. **맵 파싱**

- **맵 파일**은 `.cub` 확장자를 가진 텍스트 파일로, 맵의 벽 텍스처, 바닥 색상, 천장 색상, 그리고 플레이어의 위치를 정의합니다.
- 맵은 `1`(벽)과 `0`(빈 공간), 그리고 `N`, `S`, `E`, `W`(플레이어 시작 방향) 등의 문자를 사용해 정의됩니다.
  
### 3. **MinilibX 라이브러리**
MinilibX는 간단한 그래픽 출력을 가능하게 해주는 라이브러리입니다. 창을 열고, 이미지와 텍스처를 다루며, 사용자의 키보드 및 마우스 입력을 처리할 수 있습니다.


## 📊 주요 기능

### 1. **맵 파일 파싱**
맵 파일에서 벽 텍스처 경로와 바닥, 천장 색상을 파싱하고, 이를 그래픽스 엔진에서 사용할 수 있도록 처리합니다.

```c
void parse_cub_file(char *filename) {
    // 맵 파일을 열고, 텍스처 경로와 색상 정보를 읽어들입니다.
}
```

### 2. **Ray-casting 알고리즘**

Ray-casting을 이용해 시야 내에 있는 벽을 탐지하고, 화면에 벽의 높이를 그립니다.

```c
void render_frame() {
    for (int x = 0; x < screen_width; x++) {
        double camera_x = 2 * x / (double)screen_width - 1;
        // 레이 계산 및 벽 그리기
    }
}
```

### 3. **Minimap 구현**

맵을 실시간으로 렌더링하며, 플레이어가 현재 위치한 곳을 작은 미니맵으로 표시합니다.

```c
void render_minimap() {
    // 플레이어의 위치를 중심으로 한 미니맵을 그립니다.
}
```


## 🧠 프로그램 동작

### 1. **프로그램 실행 방법**

다음 명령어를 사용하여 Cub3D 프로그램을 실행할 수 있습니다:

```bash
./cub3D map_file.cub
```

**예시**:
```bash
./cub3D maps/maze.cub
```

이 명령어는 주어진 맵 파일(`.cub`)을 기반으로 3D 맵을 렌더링하고, 플레이어가 맵을 탐험할 수 있게 합니다.

### 2. **출력**

게임이 실행되면 플레이어는 벽이 있는 3D 공간에서 카메라를 조정하며 탐험할 수 있습니다. 또한 미니맵에서 현재 위치를 확인할 수 있습니다.

```bash
Rendering frame...
Player position: (X, Y)
```

![image](https://github.com/user-attachments/assets/37f3badb-0512-4d52-9764-434ab706d37d)


## 🛠️ 주요 함수 및 기능

### 1. **맵 파싱 관련 함수**

- **open()**: 맵 파일을 열고 그 내용을 읽어들입니다.
- **read()**: 파일의 내용을 읽어 메모리에 저장합니다.
- **close()**: 파일을 닫습니다.

### 2. **Ray-casting 관련 함수**

- **calculate_ray_position()**: 각도에 따라 레이를 쏘아 벽과의 거리를 계산합니다.
- **render_wall()**: 계산된 거리를 기반으로 벽을 그립니다.

### 3. **MinilibX 관련 함수**

- **mlx_init()**: MinilibX를 초기화하고, 창을 엽니다.
- **mlx_new_image()**: 새로운 이미지를 생성하여 화면에 표시할 수 있도록 준비합니다.
- **mlx_put_image_to_window()**: 생성된 이미지를 창에 그립니다.
- **mlx_key_hook()**: 사용자의 키 입력을 감지하여 처리합니다.


## 📋 중요한 개념

### 1. **삼각함수와 벡터**

Ray-casting은 삼각함수와 벡터 연산을 통해 레이의 방향을 계산합니다. 이를 통해 카메라가 보는 방향을 기반으로 벽과의 거리를 계산할 수 있습니다.

### 2. **동적 메모리 관리**

맵 데이터를 동적으로 할당하고, 사용이 끝난 후에는 메모리를 해제하는 것이 중요합니다. 이는 프로그램의 안정성과 메모리 누수를 방지하는 데 필수적입니다.

## 🧑‍🤝‍🧑 팀
전 맵 파싱을 담당했습니다.

- **맵 파싱**: 맵 파일에서 텍스처 경로, 색상, 플레이어 위치를 파싱하고 게임 엔진이 맵 데이터를 정확하게 불러오고 이를 기반으로 렌더링 할 수 있도록 합니다.
- **게임 실행 및 렌더링**: Ray-casting 알고리즘을 구현하고, MinilibX 라이브러리를 사용하여 게임을 실행하고 3D 그래픽을 렌더링합니다.

## 📚 참고 자료

- [Ray-casting 개념](https://en.wikipedia.org/wiki/Ray_casting)
- [MinilibX 사용법](https://harm-smits.github.io/42docs/libs/minilibx)
- [Ray-casting 튜토리얼](https://github.com/365kim/raycasting_tutorial)
